#!/usr/bin/env python
#
# Script to run doppler.fit() on a spectrum

from __future__ import print_function

import os
import time
import numpy as np
from argparse import ArgumentParser
import traceback
try:
    import __builtin__ as builtins # Python 2
except ImportError:
    import builtins # Python 3
from delvered import bricks_daemon

# Main command-line program
if __name__ == "__main__":
    parser = ArgumentParser(description='Run delvered_forcebrick')
    parser.add_argument('--scriptsdir', type=str, nargs='+', help='scripts directory')
    parser.add_argument('--nmulti', type=int, nargs=1, default=10, help='Number of jobs to run')
    args = parser.parse_args()
    scriptsdir = args.scriptsdir
    nmulti = args.nmulti

    t0 = time.time()

    # Run bricks_daemon.py
    jobs = bricks_daemon.daemon(scriptsdir,nmulti)

    print('Done')
    dt = time.time()-t0
    print('dt = {:.2f} sec'.format(dt)
